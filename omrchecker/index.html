<!DOCTYPE html><html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OMR Checker - User Panel</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="styles/style.css">
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-2xl bg-white rounded-2xl shadow p-6">
    <h1 class="text-2xl font-bold text-center mb-4">OMR Checker - User Panel</h1><div class="grid grid-cols-2 gap-4 mb-4">
  <select id="board" class="border p-2 rounded">
    <option>ржврж╛ржХрж╛ ржмрзЛрж░рзНржб</option><option>ржЪржЯрзНржЯржЧрзНрж░рж╛ржо ржмрзЛрж░рзНржб</option><option>рж░рж╛ржЬрж╢рж╛рж╣рзА ржмрзЛрж░рзНржб</option><option>ржХрзБржорж┐рж▓рзНрж▓рж╛ ржмрзЛрж░рзНржб</option>
    <option>ржпрж╢рзЛрж░ ржмрзЛрж░рзНржб</option><option>ржмрж░рж┐рж╢рж╛рж▓ ржмрзЛрж░рзНржб</option><option>рж╕рж┐рж▓рзЗржЯ ржмрзЛрж░рзНржб</option><option>ржоржпрж╝ржоржирж╕рж┐ржВрж╣ ржмрзЛрж░рзНржб</option>
    <option>ржжрж┐ржирж╛ржЬржкрзБрж░ ржмрзЛрж░рзНржб</option><option>ржорж╛ржжрзНрж░рж╛рж╕рж╛ ржмрзЛрж░рзНржб</option><option>ржХрж╛рж░рж┐ржЧрж░рж┐ ржмрзЛрж░рзНржб</option>
  </select>
  <input id="year" type="number" placeholder="рж╕рж╛рж▓ (ржпрзЗржоржи 2024)" class="border p-2 rounded" />
  <select id="subject" class="border p-2 rounded col-span-2">
    <option value="101">ржмрж╛ржВрж▓рж╛ рззржо ржкрждрзНрж░ - рззрзжрзз</option>
    <option value="102">ржмрж╛ржВрж▓рж╛ рзиржпрж╝ ржкрждрзНрж░ - рззрзжрзи</option>
    <option value="108">ржЗржВрж░рзЗржЬрж┐ рззржо ржкрждрзНрж░ - рззрзжрзо</option>
    <option value="109">ржЗржВрж░рзЗржЬрж┐ рзиржпрж╝ ржкрждрзНрж░ - рззрзжрзп</option>
    <option value="275">рждржерзНржп ржУ ржпрзЛржЧрж╛ржпрзЛржЧ ржкрзНрж░ржпрзБржХрзНрждрж┐ - рзирзнрзл</option>
    <option value="267">ржЗрж╕рж▓рж╛ржорзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ рззржо - рзирзмрзн</option>
    <option value="268">ржЗрж╕рж▓рж╛ржорзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ рзиржпрж╝ - рзирзмрзо</option>
    <option value="269">ржкрзМрж░ржирзАрждрж┐ рззржо - рзирзмрзп</option>
    <option value="270">ржкрзМрж░ржирзАрждрж┐ рзиржпрж╝ - рзирзнрзж</option>
    <option value="110">ржЕрж░рзНржержирзАрждрж┐ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="271">рж╕ржорж╛ржЬржХрж░рзНржо рззржо ржкрждрзНрж░</option>
      <option value="272">рж╕ржорж╛ржЬржХрж░рзНржо рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="121">ржпрзБржХрзНрждрж┐ржмрж┐ржжрзНржпрж╛ рззржо ржкрждрзНрж░</option>
      <option value="122">ржпрзБржХрзНрждрж┐ржмрж┐ржжрзНржпрж╛ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="123">ржоржирзЛржмрж┐ржЬрзНржЮрж╛ржи рззржо ржкрждрзНрж░</option>
      <option value="124">ржоржирзЛржмрж┐ржЬрзНржЮрж╛ржи рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="249">ржЗрж╕рж▓рж╛ржо рж╢рж┐ржХрзНрж╖рж╛ рззржо ржкрждрзНрж░</option>
      <option value="250">ржЗрж╕рж▓рж╛ржо рж╢рж┐ржХрзНрж╖рж╛ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="225">ржЪрж╛рж░рзБ ржУ ржХрж╛рж░рзБржХрж▓рж╛ рззржо ржкрждрзНрж░</option>
      <option value="226">ржЪрж╛рж░рзБ ржУ ржХрж╛рж░рзБржХрж▓рж╛ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="273">ржЧрж╛рж░рзНрж╣рж╕рзНржерзНржп ржмрж┐ржЬрзНржЮрж╛ржи рззржо ржкрждрзНрж░</option>
      <option value="274">ржЧрж╛рж░рзНрж╣рж╕рзНржерзНржп ржмрж┐ржЬрзНржЮрж╛ржи рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="125">ржнрзВржЧрзЛрж▓ ржУ ржкрж░рж┐ржмрзЗрж╢ рззржо ржкрждрзНрж░</option>
      <option value="126">ржнрзВржЧрзЛрж▓ ржУ ржкрж░рж┐ржмрзЗрж╢ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="113">рж╕ржорж╛ржЬржмрж┐ржЬрзНржЮрж╛ржи рззржо ржкрждрзНрж░</option>
      <option value="114">рж╕ржорж╛ржЬржмрж┐ржЬрзНржЮрж╛ржи рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="127">ржЗрждрж┐рж╣рж╛рж╕ рззржо ржкрждрзНрж░</option>
      <option value="128">ржЗрждрж┐рж╣рж╛рж╕ рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="119">ржжрж░рзНрж╢ржи рззржо ржкрждрзНрж░</option>
      <option value="120">ржжрж░рзНрж╢ржи рзиржпрж╝ ржкрждрзНрж░</option>
      <option value="221">рж╕ржВржЧрзАржд рззржо ржкрждрзНрж░</option>
      <option value="222">рж╕ржВржЧрзАржд рзиржпрж╝ ржкрждрзНрж░</option>
    <!-- ржЖрж░ржУ рж╕рж╛ржмржЬрзЗржХрзНржЯ ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░рзЛ -->
  </select>
  <select id="set" class="border p-2 rounded">
    <option>ржХ</option><option>ржЦ</option><option>ржЧ</option><option>ржШ</option>
  </select>
</div>

<textarea id="userAnswers" rows="5" class="w-full border p-2 rounded mb-4" placeholder="рждрзЛржорж╛рж░ ржЙрждрзНрждрж░ ржЯрж╛ржЗржк ржХрж░рзЛ: ржХ, ржЦ, ржЧ, ржШ, ..."></textarea>
<!-- рж╕рзНржХрзНржпрж╛ржи ржХрж░рж╛рж░ ржЗржиржкрзБржЯ ржУ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржпрзБржХрзНржд ржХрж░рзЛ -->
<div class="mb-4">
  <input type="file" onchange="handleOMRUpload(event)" accept="image/*" class="border p-2 rounded w-full">
</div>

<!-- ржирж┐ржЪрзЗ рж╕рзНржХрзНрж░рж┐ржкрзНржЯ ржлрж╛ржЗрж▓ рж▓рж┐ржВржХ -->
<script src="scripts/omr-reader.js"></script>
<div class="flex gap-2 mb-4">
  <input type="file" id="omrImage" accept="image/*" class="border p-2 rounded w-full">
  <button onclick="readOMRImage()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">ЁЯУ╖ рж╕рзНржХрзНржпрж╛ржи</button>
</div>

<button onclick="checkAnswers()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full">ЁЯза ржорж┐рж▓рж╛ржУ</button>

<div id="result" class="mt-6 text-center text-lg font-semibold"></div>

  </div>  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAhqfXhv2ikNKYDjs5WfEk0R99Az1XPjM8",
      authDomain: "omrchecker-884d2.firebaseapp.com",
      projectId: "omrchecker-884d2",
      storageBucket: "omrchecker-884d2.appspot.com",
      messagingSenderId: "706020565677",
      appId: "1:706020565677:web:ef04e86db3caca05841c24"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function checkAnswers() {
      const board = document.getElementById('board').value.trim();
      const year = document.getElementById('year').value.trim();
      const subject = document.getElementById('subject').value.trim();
      const set = document.getElementById('set').value.trim();
      const inputText = document.getElementById('userAnswers').value.trim();
      const userAnswers = inputText.split(',').map(a => a.trim());

      const docRef = db.doc(`answers/${board}/${year}/${subject}/${set}`);
      const doc = await docRef.get();

      if (!doc.exists) {
        document.getElementById('result').innerText = 'тЭМ ржПржЗ рждржерзНржпрзЗрж░ ржХрзЛржирзЛ ржЙрждрзНрждрж░ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐!';
        return;
      }

      const correctAnswers = doc.data().answers;
      let correct = 0;
      for (let i = 0; i < correctAnswers.length; i++) {
        if (userAnswers[i] && userAnswers[i] === correctAnswers[i]) {
          correct++;
        }
      }

      const total = correctAnswers.length;
      const wrong = total - correct;

      document.getElementById('result').innerText = `тЬЕ рж╕ржарж┐ржХ: ${correct} ржЯрж┐ | тЭМ ржнрзБрж▓: ${wrong} ржЯрж┐ | ржорзЛржЯ: ${total}`;
    }

    function readOMRImage() {
      const fileInput = document.getElementById('omrImage');
      if (!fileInput.files.length) {
        alert('ржжржпрж╝рж╛ ржХрж░рзЗ ржПржХржЯрж┐ ржЫржмрж┐ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи');
        return;
      }
      const file = fileInput.files[0];
      alert('ЁЯУ╕ ржЫржмрж┐ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рж╛рж░ ржЕржВрж╢ ржПржЦржирзЛ ржпрзБржХрзНржд рж╣ржпрж╝ржирж┐ред ржнржмрж┐рж╖рзНржпрждрзЗ ржПржЦрж╛ржирзЗ OMR рж╕рзНржХрзНржпрж╛ржи рж╣ржмрзЗред');
    }
  </script></body>
</html>
