<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OMR Checker - User Panel</title>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">
  <div class="w-full max-w-2xl bg-white rounded-2xl shadow p-6">
    <h1 class="text-2xl font-bold text-center mb-4">OMR Checker - User Panel</h1>

    <div class="grid grid-cols-2 gap-4 mb-4">
      <select id="board" class="border p-2 rounded">
        <option>ржврж╛ржХрж╛ ржмрзЛрж░рзНржб</option><option>ржЪржЯрзНржЯржЧрзНрж░рж╛ржо ржмрзЛрж░рзНржб</option><option>рж░рж╛ржЬрж╢рж╛рж╣рзА ржмрзЛрж░рзНржб</option><option>ржХрзБржорж┐рж▓рзНрж▓рж╛ ржмрзЛрж░рзНржб</option>
        <option>ржпрж╢рзЛрж░ ржмрзЛрж░рзНржб</option><option>ржмрж░рж┐рж╢рж╛рж▓ ржмрзЛрж░рзНржб</option><option>рж╕рж┐рж▓рзЗржЯ ржмрзЛрж░рзНржб</option><option>ржоржпрж╝ржоржирж╕рж┐ржВрж╣ ржмрзЛрж░рзНржб</option>
        <option>ржжрж┐ржирж╛ржЬржкрзБрж░ ржмрзЛрж░рзНржб</option><option>ржорж╛ржжрзНрж░рж╛рж╕рж╛ ржмрзЛрж░рзНржб</option><option>ржХрж╛рж░рж┐ржЧрж░рж┐ ржмрзЛрж░рзНржб</option>
      </select>
      <input id="year" type="number" placeholder="рж╕рж╛рж▓ (ржпрзЗржоржи 2024)" class="border p-2 rounded" />
      <select id="subject" class="border p-2 rounded col-span-2">
        <option value="101">ржмрж╛ржВрж▓рж╛ рззржо ржкрждрзНрж░ - рззрзжрзз</option>
        <option value="102">ржмрж╛ржВрж▓рж╛ рзиржпрж╝ ржкрждрзНрж░ - рззрзжрзи</option>
        <option value="108">ржЗржВрж░рзЗржЬрж┐ рззржо ржкрждрзНрж░ - рззрзжрзо</option>
        <option value="109">ржЗржВрж░рзЗржЬрж┐ рзиржпрж╝ ржкрждрзНрж░ - рззрзжрзп</option>
        <option value="275">рждржерзНржп ржУ ржпрзЛржЧрж╛ржпрзЛржЧ ржкрзНрж░ржпрзБржХрзНрждрж┐ - рзирзнрзл</option>
        <option value="267">ржЗрж╕рж▓рж╛ржорзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ рззржо - рзирзмрзн</option>
        <option value="268">ржЗрж╕рж▓рж╛ржорзЗрж░ ржЗрждрж┐рж╣рж╛рж╕ рзиржпрж╝ - рзирзмрзо</option>
        <option value="269">ржкрзМрж░ржирзАрждрж┐ рззржо - рзирзмрзп</option>
        <option value="270">ржкрзМрж░ржирзАрждрж┐ рзиржпрж╝ - рзирзнрзж</option>
        <!-- ржЖрж░ржУ рж╕рж╛ржмржЬрзЗржХрзНржЯ ржпрзБржХрзНржд ржХрж░рждрзЗ ржкрж╛рж░рзЛ -->
      </select>
      <select id="set" class="border p-2 rounded">
        <option>ржХ</option><option>ржЦ</option><option>ржЧ</option><option>ржШ</option>
      </select>
    </div>

    <textarea id="userAnswers" rows="5" class="w-full border p-2 rounded mb-4" placeholder="рждрзЛржорж╛рж░ ржЙрждрзНрждрж░ ржЯрж╛ржЗржк ржХрж░рзЛ: ржХ, ржЦ, ржЧ, ржШ, ..."></textarea>

    <button onclick="checkAnswers()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">ЁЯза ржорж┐рж▓рж╛ржУ</button>

    <div id="result" class="mt-6 text-center text-lg font-semibold"></div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAhqfXhv2ikNKYDjs5WfEk0R99Az1XPjM8",
      authDomain: "omrchecker-884d2.firebaseapp.com",
      projectId: "omrchecker-884d2",
      storageBucket: "omrchecker-884d2.appspot.com",
      messagingSenderId: "706020565677",
      appId: "1:706020565677:web:ef04e86db3caca05841c24"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function checkAnswers() {
      const board = document.getElementById('board').value.trim();
      const year = document.getElementById('year').value.trim();
      const subject = document.getElementById('subject').value.trim();
      const set = document.getElementById('set').value.trim();
      const inputText = document.getElementById('userAnswers').value.trim();
      const userAnswers = inputText.split(',').map(a => a.trim());

      const docRef = db.doc(`answers/${board}/${year}/${subject}/${set}`);
      const doc = await docRef.get();

      if (!doc.exists) {
        document.getElementById('result').innerText = 'тЭМ ржПржЗ рждржерзНржпрзЗрж░ ржХрзЛржирзЛ ржЙрждрзНрждрж░ ржкрж╛ржУржпрж╝рж╛ ржпрж╛ржпрж╝ржирж┐!';
        return;
      }

      const correctAnswers = doc.data().answers;
      let correct = 0;
      for (let i = 0; i < correctAnswers.length; i++) {
        if (userAnswers[i] && userAnswers[i] === correctAnswers[i]) {
          correct++;
        }
      }

      const total = correctAnswers.length;
      const wrong = total - correct;

      document.getElementById('result').innerText = `тЬЕ рж╕ржарж┐ржХ: ${correct} ржЯрж┐ | тЭМ ржнрзБрж▓: ${wrong} ржЯрж┐ | ржорзЛржЯ: ${total}`;
    }
  </script>
</body>
</html>
